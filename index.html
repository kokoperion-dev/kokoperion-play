
<!DOCTYPE html>
<html lang="ja">
<head>
 <meta charset="UTF-8" />
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>ココペリオン - 完全版</title>
 <style>
  body {
   margin: 0;
   padding: 0;
   background: black;
   overflow: hidden;
   font-family: sans-serif;
  }

  /* ▼▼▼ 追加: スタート画面 ▼▼▼ */
  #start-screen {
   position: fixed;
   top: 0;
   left: 0;
   width: 100vw;
   height: 100vh;
   background: rgba(0,0,0,0.8);
   display: flex;
   flex-direction: column;
   justify-content: center;
   align-items: center;
   z-index: 1000;
   color: white;
  }
  
  #start-button {
   padding: 15px 30px;
   font-size: 20px;
   background: #4CAF50;
   color: white;
   border: none;
   border-radius: 5px;
   cursor: pointer;
   margin-top: 20px;
  }
  /* ▲▲▲ 追加終了 ▲▲▲ */

  #game-area {
   position: relative;
   width: 100vw;
   height: 100vh;
   background-image: url('background.PNG');
   background-size: cover;
   background-position: center bottom 20%; /* 変更: 山が見える位置に調整 */
   display: none; /* 追加: 最初は非表示 */
  }

  /* ▼▼▼ 変更: アライグマのスタイル ▼▼▼ */
  #raccoon {
   position: absolute;
   bottom: 15%; /* 山の上に配置 */
   width: 120px;
   z-index: 10;
   left: 0;
   transform: scaleX(1);
   transition: transform 0.3s;
  }
  /* ▲▲▲ 変更終了 ▲▲▲ */

  /* 既存のスタイルはそのまま維持 */
  #kokopelli {
   position: absolute;
   top: 10%;
   left: 5%;
   width: 100px;
   z-index: 10;
   animation: float 3s ease-in-out infinite alternate;
  }

  @keyframes float {
   0% { transform: translateX(0); }
   50% { transform: translateX(20px); }
   100% { transform: translateX(-20px); }
  }

  /* ...（その他の既存スタイルは変更なし）... */
 </style>
</head>
<body>
 <!-- ▼▼▼ 追加: スタート画面 ▼▼▼ -->
 <div id="start-screen">
  <h1>ココペリオン</h1>
  <p>知恵の星を集めよう！</p>
  <button id="start-button">ゲームスタート</button>
 </div>
 <!-- ▲▲▲ 追加終了 ▲▲▲ -->

 <!-- 既存のゲームエリア -->
 <div id="game-area">
  <img id="kokopelli" src="kokopelli.PNG" alt="ココペリ">
  <img id="raccoon" src="raccoon.PNG" alt="アライグマ">
  <div id="score-display">スコア: <span id="score">0</span></div>
  <div id="timer-display">残り: <span id="timer">30</span>秒</div>
  <div id="stage-display">ステージ: <span id="stage">1</span></div>
 </div>

 <!-- 既存のメッセージオーバーレイ -->
 <div id="message-overlay">
  <div id="message-content"></div>
  <div id="wisdom"></div>
  <button id="next-button">次へ</button>
  <button id="retry-button">もう一度</button>
 </div>

 <!-- 既存のaudio要素 -->
 <audio id="bgm-main" src="main_bgm.mp3" loop></audio>
 <!-- ...（その他のaudio要素は変更なし）... -->

 <script>
  // ▼▼▼ 追加: スタート処理 ▼▼▼
  const startButton = document.getElementById('start-button');
  const startScreen = document.getElementById('start-screen');
  const gameArea = document.getElementById('game-area');
  const mainBgm = document.getElementById('bgm-main');
  
  startButton.addEventListener('click', () => {
   startScreen.style.display = 'none';
   gameArea.style.display = 'block';
   
   // BGM再生（ユーザー操作後なので確実に再生可能）
   mainBgm.currentTime = 0;
   mainBgm.play().catch(e => console.log("BGMエラー:", e));
   
   startStage();
  });
  /* ▲▲▲ 追加終了 ▲▲▲ */

  // ▼▼▼ 変更: アライグマ移動処理 ▼▼▼
  let raccoonDirection = 1; // 1:右向き, -1:左向き
  let raccoonSpeed = 3;

  function moveRaccoon() {
   if (!running) return;
   
   let currentLeft = parseInt(raccoon.style.left) || 0;
   currentLeft += raccoonSpeed * raccoonDirection;
   
   // 端まで来たら反転
   if (currentLeft <= 0) {
    currentLeft = 0;
    raccoonDirection = 1;
    raccoon.style.transform = 'scaleX(1)';
   } else if (currentLeft >= window.innerWidth - raccoon.width) {
    currentLeft = window.innerWidth - raccoon.width;
    raccoonDirection = -1;
    raccoon.style.transform = 'scaleX(-1)';
   }
   
   raccoon.style.left = currentLeft + 'px';
   requestAnimationFrame(moveRaccoon);
  }
  /* ▲▲▲ 変更終了 ▲▲▲ */

  // 既存のゲーム関数（startStage, endStage, spawnStarなど）はそのまま維持
  // ...（すべての既存ゲームロジックをここに保持）...

  // ゲーム開始時にアライグマ移動を開始
  function startStage() {
   // ...（既存の処理）
   moveRaccoon(); // 追加
  }

  // 既存のタッチ/マウス操作イベントはそのまま維持
 </script>
</body>
</html>


「AIで下書き生成」機能がご利用いただけるようになりました

